# Complete Workflow Visualization

![Complete Workflow](complete_workflow_diagram_1768400966434.png)

## ðŸ“ Where Files Are Saved

### Blog Posts
- **Location**: `content/blog/YYYY-MM-DD-title-slug.md`
- **Format**: Markdown with YAML frontmatter
- **Generated by**: Mountain Researcher OR Content Updater

### Mission Logs
- **Location**: `content/mission-logs.json`
- **Format**: JSON array
- **Generated by**: Content Updater

### Incoming Notes (Pre-Processing)
- **Location**: `content/incoming-notes/*.txt`
- **Format**: Plain text
- **Source**: Manual upload OR Discord bot

---

## ðŸŽ¨ How to View Drafts

### Option 1: Public Blog Page (All Posts)
```bash
npm run dev
# Open: http://localhost:3000/blog
```
This shows ALL blog posts from `content/blog/` using the existing `RedBullBlogGrid` component.

### Option 2: Agent Dashboard (NEW - With Controls)
```bash
npm run dev
# Open: http://localhost:3000/dashboard
```
Features:
- âœ… View all drafts with metadata (word count, image status)
- ðŸš€ Trigger agents with one click
- ðŸ‘ï¸ Preview individual posts
- ðŸ“Š See stats (total drafts, images, word count)

---

## ðŸ¤– Discord Integration Workflow

### Quick Setup
1. **Create Discord Bot** (see `agents/discord-bridge/README.md`)
2. **Add credentials** to `.env.local`:
   ```env
   DISCORD_BOT_TOKEN=your_token
   DISCORD_CHANNEL_ID=your_channel_id
   ```
3. **Install dependency**:
   ```bash
   npm install discord.js
   ```
4. **Run Discord Bridge**:
   ```bash
   npx ts-node agents/discord-bridge/index.ts
   ```

### How It Works
1. **You post** in Discord:
   - Text: `!note Just sent Everest South Col!`
   - OR upload `climb-notes.txt`
2. **Bot saves** to `content/incoming-notes/`
3. **Content Updater** (runs on schedule) processes it:
   - Creates Mission Log entry
   - Drafts blog post (Llama 3)
   - Archives note to `/processed/`
4. **Bot notifies** you: "âœ… Blog drafted! Preview at localhost:3000/dashboard"

---

## ðŸ”„ Complete Flow Example

### Scenario 1: Auto-Generated Research Blog
```
1. Cron triggers Researcher (Monday 9 AM)
   â””â”€> Brainstorm topic (Llama 3 - Local)
   â””â”€> Draft post (Llama 3 - Local)
   â””â”€> Generate image (Gemini - Cloud, retries if rate limited)
   â””â”€> Save to content/blog/2026-01-14-topic.md

2. You open http://localhost:3000/dashboard
   â””â”€> See new draft with preview
   â””â”€> Click "Preview" to read full post
   â””â”€> Click "Publish" (future feature) to deploy
```

### Scenario 2: Discord Note â†’ Blog
```
1. You post in Discord: "!note Crazy day on K2..."
   â””â”€> Discord bot saves to incoming-notes/

2. Content Updater runs (every hour OR manual trigger)
   â””â”€> Reads note
   â””â”€> Creates Mission Log entry
   â””â”€> Drafts blog post
   â””â”€> Archives note to /processed/

3. Discord bot replies: "âœ… Blog ready at /dashboard"

4. You open dashboard
   â””â”€> Preview the blog
   â””â”€> Edit if needed (manual for now)
   â””â”€> Goes live at /blog
```

---

## ðŸŽ¯ Next Steps

### Immediate (Works Now)
1. Run dev server: `npm run dev`
2. Visit dashboard: `http://localhost:3000/dashboard`
3. Manually trigger agents via dashboard buttons

### Short-Term (Easy to Add)
1. Set up Discord bot (5 min)
2. Add cron job for auto-execution (2 min)
3. Install `gray-matter` for frontmatter parsing:
   ```bash
   npm install gray-matter
   ```

### Long-Term (Future Features)
1. "Publish" button (moves draft to public)
2. Edit-in-browser capability
3. Email notifications
4. Cloud deployment (Vercel)
